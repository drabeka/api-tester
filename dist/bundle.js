(()=>{var l=window.React,S=window.React.useState,W=window.React.useEffect,ie=window.React.useRef,fe=window.React.useMemo,bo=window.React.createElement,G=window.React.useCallback,Ao=window.React.Fragment;var gn=window.ReactDOM,No=window.ReactDOM.createRoot;function Ke(e,n){W(()=>{let r=i=>{e.current&&!e.current.contains(i.target)&&n()};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[e,n])}function de(e={}){let[n,r]=S(!1),[i,t]=S(""),a=ie(null),o=G(()=>{r(!1),t(""),e.onClose?.()},[e.onClose]),s=G(()=>r(!0),[]),u=G(()=>{r(m=>(m&&(t(""),e.onClose?.()),!m))},[e.onClose]);Ke(a,o);let c=G(m=>({ref:a,onKeyDown:p=>{p.key==="Escape"&&(o(),p.stopPropagation()),m?.(p)}}),[o]);return{isOpen:n,setIsOpen:r,containerRef:a,searchTerm:i,setSearchTerm:t,open:s,close:o,toggle:u,getContainerProps:c}}function Ue({apis:e,selectedApiId:n,onSelect:r}){let{isOpen:i,searchTerm:t,setSearchTerm:a,close:o,open:s,containerRef:u}=de(),[c,m]=S({}),p=ie(null),v=fe(()=>e.find(N=>N.id===n)||null,[e,n]),y=fe(()=>{let N=e.filter(E=>{if(!t)return!0;let T=t.toLowerCase();return E.name.toLowerCase().includes(T)||E.endpoint?.toLowerCase().includes(T)||E.method?.toLowerCase().includes(T)||E.tag?.toLowerCase().includes(T)}),g={};return N.forEach(E=>{let T=E.tag||"Sonstige";g[T]||(g[T]=[]),g[T].push(E)}),g},[e,t]),b=Object.keys(y).sort(),x=Object.values(y).reduce((N,g)=>N+g.length,0),d=N=>{m(g=>({...g,[N]:!g[N]}))},A=N=>{r(N),o()};return l.createElement("div",{className:"api-selector",ref:u},i?l.createElement("div",{className:"api-search"},l.createElement("input",{ref:p,type:"text",placeholder:"APIs suchen...",value:t,onChange:N=>a(N.target.value),onKeyDown:N=>{N.key==="Escape"&&o()},className:"dropdown-search-input api-search-input",autoFocus:!0}),t&&l.createElement("span",{className:"api-search-count"},x," Treffer")):l.createElement("div",{className:"api-combobox-trigger",onClick:()=>{s(),a(""),setTimeout(()=>p.current?.focus(),0)}},v?l.createElement("div",{className:"api-combobox-selected"},l.createElement("span",{className:`api-method-badge method-${v.method.toLowerCase()}`},v.method),l.createElement("span",{className:"api-combobox-name"},v.name),v.tag&&l.createElement("span",{className:"api-combobox-tag"},v.tag)):l.createElement("span",{className:"api-combobox-placeholder"},"API ausw\xE4hlen..."),l.createElement("span",{className:"dropdown-arrow"})),i&&l.createElement("div",{className:"dropdown-panel api-dropdown-list"},b.map(N=>l.createElement("div",{key:N,className:"api-tag-group"},l.createElement("div",{className:"api-tag-header",onClick:()=>d(N)},l.createElement("span",{className:"api-tag-toggle"},c[N]?"\u25B8":"\u25BE"),l.createElement("span",{className:"api-tag-name"},N),l.createElement("span",{className:"api-tag-count"},y[N].length)),!c[N]&&l.createElement("div",{className:"api-tag-items"},y[N].map(g=>l.createElement("div",{key:g.id,className:`api-item ${n===g.id?"api-item-active":""}`,onClick:()=>A(g),title:g.description||g.endpoint},l.createElement("span",{className:`api-method-badge method-${g.method.toLowerCase()}`},g.method),l.createElement("span",{className:"api-item-name"},g.name)))))),b.length===0&&l.createElement("div",{className:"api-empty"},t?"Keine APIs gefunden":"Keine APIs geladen")))}var te={HISTORY:"api_tester_history",FAVORITES:"api_tester_favorites",AUTH:"api_tester_auth"},Br=20,Ce=(e,n=null)=>{try{let r=localStorage.getItem(e);return r?JSON.parse(r):n}catch(r){return console.error(`Error reading from localStorage (${e}):`,r),n}},ve=(e,n)=>{try{return localStorage.setItem(e,JSON.stringify(n)),!0}catch(r){return console.error(`Error writing to localStorage (${e}):`,r),!1}},Oe=()=>Ce(te.HISTORY,[]),vn=e=>{let n=Oe(),r={id:Date.now(),timestamp:new Date().toISOString(),...e},i=[r,...n].slice(0,Br);return ve(te.HISTORY,i),r},yn=e=>{let r=Oe().filter(i=>i.id!==e);ve(te.HISTORY,r)},xn=()=>{ve(te.HISTORY,[])},bn=()=>Ce(te.FAVORITES,[]),An=e=>{let n=bn(),r=n.indexOf(e);return r>-1?n.splice(r,1):n.push(e),ve(te.FAVORITES,n),n},wn=e=>bn().includes(e),_e=e=>Ce(te.AUTH,{})[e]||null,Nn=(e,n)=>{let r=Ce(te.AUTH,{});r[e]=n,ve(te.AUTH,r)},Cn=e=>{let n=Ce(te.AUTH,{});delete n[e],ve(te.AUTH,n)};var Sn="api_tester_environments",kn="api_tester_active_env",Kr=[{name:"Development",variables:{baseUrl:"http://localhost:3000",apiKey:"dev-key-123",timeout:"5000"}},{name:"Staging",variables:{baseUrl:"https://staging.example.com",apiKey:"staging-key-456",timeout:"15000"}},{name:"Production",variables:{baseUrl:"https://api.example.com",apiKey:"prod-key-789",timeout:"30000"}}];function En(){try{let e=localStorage.getItem(Sn);if(e)return JSON.parse(e)}catch(e){console.warn("Fehler beim Laden der Environments:",e)}return Kr}function Tn(e){try{localStorage.setItem(Sn,JSON.stringify(e))}catch(n){console.error("Fehler beim Speichern der Environments:",n)}}function In(){try{return localStorage.getItem(kn)||""}catch{return""}}function Fn(e){try{localStorage.setItem(kn,e)}catch(n){console.error("Fehler beim Speichern des aktiven Environments:",n)}}function Ye(e,n){return!e||typeof e!="string"||!n?e:e.replace(/\{\{(\w+)\}\}/g,(r,i)=>n[i]!==void 0?n[i]:r)}var Ur=3e4;function Yr(e,n,r){let i=e,t={},a={},o=[];if(r.forEach(s=>{let u=n[s.name],c=s.paramType||"body";if(!(u==null||u===""))switch(c){case"path":i=i.replace(`{${s.name}}`,encodeURIComponent(u));break;case"query":Array.isArray(u)?u.forEach(m=>{m!=null&&m!==""&&o.push(`${encodeURIComponent(s.name)}=${encodeURIComponent(m)}`)}):o.push(`${encodeURIComponent(s.name)}=${encodeURIComponent(u)}`);break;case"header":a[s.name]=u;break;case"body":default:t[s.name]=u;break}}),o.length>0){let s=i.includes("?")?"&":"?";i+=s+o.join("&")}return{finalEndpoint:i,bodyPayload:t,customHeaders:a}}async function On(e){let{endpoint:n,method:r="POST",payload:i={},fields:t=[],authConfig:a=null,apiId:o,apiName:s,timeout:u=Ur,useProxy:c=!0,contentType:m="application/json",accept:p="*/*",envVariables:v=null,bodyPath:y=null}=e,{finalEndpoint:b,bodyPayload:x,customHeaders:d}=Yr(n,i,t);if(y&&y.length>0&&Object.keys(x).length>0){let O=x;for(let M=y.length-1;M>=0;M--)O={[y[M]]:O};x=O}let A={...d};p&&(A.Accept=p);let f=x&&(typeof x=="string"?x.length>0:Object.keys(x).length>0);if(["POST","PUT","PATCH"].includes(r.toUpperCase())&&f&&(A["Content-Type"]=m),a){if(a.type==="bearer")A.Authorization=`Bearer ${a.token}`;else if(a.type==="apikey"){let O=a.keyName||a.headerName||"X-API-Key",M=a.keyLocation||"header",K=a.apiKey;if(K)switch(M){case"query":{let X=b.includes("?")?"&":"?";b+=`${X}${encodeURIComponent(O)}=${encodeURIComponent(K)}`;break}case"cookie":A.Cookie=`${O}=${K}`;break;case"header":default:A[O]=K;break}}}v&&(b=Ye(b,v),Object.keys(A).forEach(O=>{typeof A[O]=="string"&&(A[O]=Ye(A[O],v))}));let N=Date.now(),g=null,E=null,T=null;try{let O=new AbortController,M=setTimeout(()=>O.abort(),u),K,X;c?(X="/api/proxy",K={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:b,method:r,headers:A,body:["POST","PUT","PATCH"].includes(r.toUpperCase())?x:void 0}),signal:O.signal}):(X=b,K={method:r,headers:A,signal:O.signal},["POST","PUT","PATCH"].includes(r.toUpperCase())&&(K.body=JSON.stringify(x))),g=await fetch(X,K),clearTimeout(M);let w=await g.text();try{E=JSON.parse(w)}catch{E=w}}catch(O){T=O,O.name==="AbortError"&&(T=new Error(`Request timeout after ${u}ms`))}let Y=Date.now()-N,P={apiId:o,apiName:s,endpoint:b,method:r,payload:x,status:g?g.status:0,statusText:g?g.statusText:"Network Error",responseData:E,error:T?T.message:null,duration:Y};if(vn(P),T)throw T;return{ok:g.ok,status:g.status,statusText:g.statusText,data:E,headers:Object.fromEntries(g.headers.entries()),duration:Y}}function Ve(e){return typeof e=="object"?JSON.stringify(e,null,2):String(e)}function _n(e,n){let r={};return e.forEach(i=>{let t=n[i.name];if(i.required){if(t==null||t===""){r[i.name]=i.requiredError||`${i.label} ist erforderlich`;return}if(i.type==="array"&&Array.isArray(t)&&t.length===0){r[i.name]=i.requiredError||`${i.label}: Mindestens ein Eintrag erforderlich`;return}}if(!(t==null||t==="")){if(i.type==="number"){let a=parseFloat(t);if(isNaN(a)){r[i.name]=`${i.label} muss eine Zahl sein`;return}if(i.min!==void 0&&a<i.min){r[i.name]=i.minError||`${i.label} muss mindestens ${i.min} sein`;return}if(i.max!==void 0&&a>i.max){r[i.name]=i.maxError||`${i.label} darf maximal ${i.max} sein`;return}}if(i.type==="text"||i.type==="textarea"){let a=String(t);if(i.minLength!==void 0&&a.length<i.minLength){r[i.name]=i.minLengthError||`${i.label} muss mindestens ${i.minLength} Zeichen lang sein`;return}if(i.maxLength!==void 0&&a.length>i.maxLength){r[i.name]=i.maxLengthError||`${i.label} darf maximal ${i.maxLength} Zeichen lang sein`;return}if(i.pattern&&!new RegExp(i.pattern).test(a)){r[i.name]=i.patternError||`${i.label} hat ein ung\xFCltiges Format`;return}}}}),{valid:Object.keys(r).length===0,errors:r}}function Le({id:e,domain:n,domainName:r,value:i,onChange:t,onBlur:a,required:o,placeholder:s}){let{isOpen:u,searchTerm:c,setSearchTerm:m,close:p,open:v,containerRef:y}=de({onClose:a}),[b,x]=S({}),[d,A]=S(-1),f=ie(null),N=ie(null),g=G((h,k)=>{if(!h||!k)return null;for(let I of h){if(I.code===k)return I;if(I.values){let _=g(I.values,k);if(_)return _}}return null},[]),E=fe(()=>!n||!i?null:g(n.values,i),[n,i,g]),T=G((h,k)=>{if(!k||!h)return h;let I=k.toLowerCase();return h.reduce((_,j)=>{let V=j.name.toLowerCase().includes(I),pe=j.code.toLowerCase().includes(I);if(j.values){let D=T(j.values,k);(V||pe||D.length>0)&&_.push({...j,values:D.length>0?D:j.values})}else(V||pe)&&_.push(j);return _},[])},[]),Y=fe(()=>n?T(n.values,c):[],[n,c,T]),{flatEntries:P,parentMap:O}=fe(()=>{let h=[],k={},I=(_,j)=>{if(_)for(let V of _)h.push(V),j&&(k[V.code]=j),V.values&&V.values.length>0&&!b[V.code]&&I(V.values,V.code)};return I(Y,null),{flatEntries:h,parentMap:k}},[Y,b]),M=(h,k)=>{k.stopPropagation(),x(I=>({...I,[h]:!I[h]}))},K=h=>{h.status==="V"&&(t({target:{value:h.code}}),p())},X=()=>{v(),m(""),A(-1),setTimeout(()=>f.current?.focus(),0)},w=G((h,k)=>{let I=P.length;if(I===0)return-1;let _=h+k;return _<0?I-1:_>=I?0:_},[P]),F=G(h=>{if(!N.current)return;let k=N.current.querySelectorAll(".domain-tree-item");k[h]&&k[h].scrollIntoView({block:"nearest"})},[]),$=h=>{if(h.key==="Escape"){p(),A(-1);return}if(h.key==="ArrowDown"){h.preventDefault();let k=w(d,1);k!==-1&&(A(k),F(k));return}if(h.key==="ArrowUp"){h.preventDefault();let k=w(d,-1);k!==-1&&(A(k),F(k));return}if(h.key==="ArrowRight"){if(h.preventDefault(),d>=0&&d<P.length){let k=P[d];k.values&&k.values.length>0&&b[k.code]&&x(I=>({...I,[k.code]:!1}))}return}if(h.key==="ArrowLeft"){if(h.preventDefault(),d>=0&&d<P.length){let k=P[d];if(k.values&&k.values.length>0&&!b[k.code])x(I=>({...I,[k.code]:!0}));else{let I=O[k.code];if(I){let _=P.findIndex(j=>j.code===I);_>=0&&(A(_),F(_),x(j=>({...j,[I]:!0})))}}}return}if(h.key==="Enter"){h.preventDefault(),d>=0&&d<P.length&&K(P[d]);return}},ee=(h,k)=>{let I=h.values&&h.values.length>0,_=b[h.code],j=h.code===i,V=h.status==="N"||h.status==="S",pe=P.indexOf(h),D=pe===d,H=h.status==="N"?"domain-status-unavailable":h.status==="S"?"domain-status-locked":"";return l.createElement("div",{key:h.code},l.createElement("div",{className:`domain-tree-item ${H} ${j?"domain-item-active":""} ${D?"domain-item-highlighted":""}`,style:{paddingLeft:`${12+k*16}px`},onClick:()=>!V&&K(h),onMouseEnter:()=>A(pe),title:V?h.status==="N"?"Nicht verf\xFCgbar":"Nicht mehr ausw\xE4hlbar":`${h.code} \u2013 ${h.name}`},I?l.createElement("span",{className:"domain-toggle",onClick:ne=>M(h.code,ne)},_?"\u25B8":"\u25BE"):l.createElement("span",{className:"domain-toggle-spacer"}),l.createElement("span",{className:"domain-item-code"},h.code),l.createElement("span",{className:"domain-item-name"},h.name),h.status==="S"&&l.createElement("span",{className:"domain-lock-icon",title:"Gesperrt"},"\u{1F512}")),I&&!_&&l.createElement("div",{className:"domain-tree-children"},h.values.map(ne=>ee(ne,k+1))))};return n?l.createElement("div",{className:"domain-field",ref:y},u?l.createElement("div",{className:"domain-search"},l.createElement("input",{ref:f,type:"text",placeholder:"Suchen...",value:c,onChange:h=>{m(h.target.value),A(-1)},onKeyDown:$,className:"dropdown-search-input",autoFocus:!0})):l.createElement("div",{className:"domain-trigger",onClick:X},E?l.createElement("span",{className:"domain-selected-value"},l.createElement("span",{className:"domain-selected-code"},E.code),l.createElement("span",{className:"domain-selected-name"},E.name)):l.createElement("span",{className:"domain-placeholder"},s),l.createElement("span",{className:"dropdown-arrow"})),u&&l.createElement("div",{className:"dropdown-panel domain-dropdown",ref:N},Y.length>0?Y.map(h=>ee(h,0)):l.createElement("div",{className:"domain-empty"},c?"Keine Treffer":"Keine Eintr\xE4ge"))):l.createElement("div",{className:"domain-field-error"},"Domain \u201E",r,'" nicht gefunden')}function le({label:e,type:n="text",name:r,value:i,onChange:t,onArrayChange:a,required:o=!1,error:s=null,placeholder:u="",helpText:c="",step:m,rows:p=4,options:v=[],min:y,max:b,minLength:x,maxLength:d,pattern:A,children:f,className:N="",paramType:g,itemType:E="text",itemOptions:T=[],itemFields:Y=[],domain:P,domainName:O}){let M=r||`field-${Math.random().toString(36).substring(2,11)}`,[K,X]=S(!1),[w,F]=S(null),$=o||A||y!==void 0||b!==void 0||x!==void 0||d!==void 0,ee=D=>{if(D==null||D==="")return o?"error":null;if(A&&(n==="text"||n==="textarea")&&!new RegExp(A).test(String(D)))return"error";if(n==="number"){let H=parseFloat(D);if(isNaN(H)||y!==void 0&&H<y||b!==void 0&&H>b)return"error"}if(n==="text"||n==="textarea"){let H=String(D).length;if(x!==void 0&&H<x||d!==void 0&&H>d)return"error"}return"valid"},h=()=>{$&&(X(!0),F(ee(i)))},k=D=>{t(D),K&&$&&F(ee(D.target.value))};W(()=>{$&&(K?F(ee(i)):(o||i!=null&&i!=="")&&(X(!0),F(ee(i))))},[i]);let I=$&&w?`field-${w}`:"",_=()=>{let D=Array.isArray(i)?i:[],H=()=>{if(E==="object"&&Y.length>0){let Z={};Y.forEach(q=>{Z[q.name]=""}),a([...D,Z])}else a([...D,""])},ne=Z=>{a(D.filter((q,L)=>L!==Z))},Ne=(Z,q)=>{let L=[...D];L[Z]=q,a(L)},hn=(Z,q,L)=>{let re=[...D];re[Z]={...re[Z],[q]:L},a(re)};return l.createElement("div",{className:"array-field-container"},D.map((Z,q)=>E==="object"&&Y.length>0?l.createElement("div",{key:q,className:"array-object-item"},l.createElement("div",{className:"array-object-header"},l.createElement("span",{className:"array-item-label"},"Item ",q+1),l.createElement("button",{type:"button",className:"array-remove-btn",onClick:()=>ne(q),title:"Entfernen"},"\u2715")),l.createElement("div",{className:"array-object-fields"},Y.map(L=>l.createElement("div",{key:L.name,className:"array-object-field"},l.createElement("label",null,L.label),L.type==="select"&&L.options?l.createElement("select",{value:Z?.[L.name]??"",onChange:re=>hn(q,L.name,re.target.value)},l.createElement("option",{value:""},"-- Ausw\xE4hlen --"),L.options.map(re=>l.createElement("option",{key:re.value,value:re.value},re.label))):l.createElement("input",{type:L.type==="number"?"number":"text",value:Z?.[L.name]??"",onChange:re=>hn(q,L.name,re.target.value),placeholder:L.placeholder||L.label}))))):l.createElement("div",{key:q,className:"array-item"},E==="select"&&T.length>0?l.createElement("select",{value:Z??"",onChange:L=>Ne(q,L.target.value)},l.createElement("option",{value:""},"-- Ausw\xE4hlen --"),T.map(L=>l.createElement("option",{key:L.value,value:L.value},L.label))):l.createElement("input",{type:E==="number"?"number":"text",value:Z??"",onChange:L=>Ne(q,L.target.value),placeholder:`Item ${q+1}`}),l.createElement("button",{type:"button",className:"array-remove-btn",onClick:()=>ne(q),title:"Entfernen"},"\u2715"))),l.createElement("button",{type:"button",className:"array-add-btn",onClick:H},"+ Hinzuf\xFCgen"))},j=()=>{if(n==="array")return _();let D=ne=>{t(ne),$&&(X(!0),F(ee(ne.target.value)))};if(n==="domain")return l.createElement(Le,{id:M,domain:P,domainName:O,value:i??"",onChange:D,onBlur:h,required:o,placeholder:u||"-- Ausw\xE4hlen --"});if(n==="select"){let ne={name:e,values:v.map(Ne=>({code:Ne.value,name:Ne.label,status:"V"}))};return l.createElement(Le,{id:M,domain:ne,domainName:r,value:i??"",onChange:D,onBlur:h,required:o,placeholder:u||"-- Ausw\xE4hlen --"})}if(n==="textarea")return l.createElement("textarea",{id:M,value:i??"",onChange:k,onBlur:h,required:o,rows:p,placeholder:u,minLength:x,maxLength:d});let H={type:n,id:M,value:i??"",onChange:k,onBlur:h,required:o,placeholder:u};return n==="number"&&(m!==void 0&&(H.step=m),y!==void 0&&(H.min=y),b!==void 0&&(H.max=b)),n==="text"&&(x!==void 0&&(H.minLength=x),d!==void 0&&(H.maxLength=d),A&&(H.pattern=A)),n==="date"&&(y!==void 0&&(H.min=y),b!==void 0&&(H.max=b)),l.createElement("input",{...H})},V={query:"Query",path:"Path",header:"Header",body:"Body"},pe=()=>l.createElement("span",{className:`param-type-badge param-badge-${g||"body"}`},V[g]||"Body");return l.createElement("div",{className:`form-group ${I} ${N}`.trim()},l.createElement("label",{htmlFor:M},e,c&&l.createElement("span",{className:"help-icon","data-tooltip":c},"i"),g&&pe()),j(),s&&l.createElement("span",{className:"error-message"},s),f)}function oe({icon:e,message:n,children:r,className:i=""}){return l.createElement("div",{className:`no-history ${i}`.trim()},e&&l.createElement("div",{className:"empty-state-icon"},e),l.createElement("p",null,n),r)}function qe({api:e,onResponse:n,initialValues:r=null,domains:i={},envVariables:t=null}){let[a,o]=S({}),[s,u]=S({}),[c,m]=S(!1);W(()=>{if(e){let f={};p(e).forEach(g=>{r&&r[g.name]!==void 0?f[g.name]=r[g.name]:g.type==="array"?f[g.name]=g.defaultValue!==void 0?g.defaultValue:[]:f[g.name]=g.defaultValue!==void 0?g.defaultValue:""}),o(f),u({})}},[e,r]);let p=f=>f.sections?f.sections.flatMap(N=>N.fields||[]):f.fields||[],v=(f,N)=>{o(g=>({...g,[f]:N})),s[f]&&u(g=>{let E={...g};return delete E[f],E})},y=async f=>{f.preventDefault();let g=p(e).filter(T=>d(T)),E=_n(g,a);if(!E.valid){u(E.errors);return}m(!0),u({});try{let T={};g.forEach(O=>{a[O.name]!==void 0&&(T[O.name]=a[O.name])});let Y=_e(e.id),P=await On({endpoint:e.endpoint,method:e.method,payload:T,fields:g,authConfig:Y,apiId:e.id,apiName:e.name,contentType:e.contentType,accept:e.accept,useProxy:e.corsProxy!==!1,envVariables:t,bodyPath:e.bodyPath});n(P)}catch(T){n({ok:!1,status:0,statusText:"Error",data:null,error:T.message})}finally{m(!1)}},b=f=>{f.ctrlKey&&f.key==="Enter"&&y(f)},x=()=>{if(!e)return;let f={};p(e).forEach(g=>{let E=g.exampleValue!==void 0?g.exampleValue:g.defaultValue;E!==void 0?f[g.name]=E:g.type==="array"&&!f[g.name]&&(f[g.name]=[])}),o(f),u({})};if(!e)return l.createElement("div",{className:"request-form"},l.createElement(oe,{icon:"\u{1F4DD}",message:"Bitte w\xE4hlen Sie eine API aus."}));let d=f=>{if(!f.showIf)return!0;let{field:N,value:g}=f.showIf,E=a[N];return Array.isArray(g)?g.includes(E):E===g},A=f=>{if(!d(f))return null;let N=E=>{let T=f.type==="number"?E.target.value===""?"":parseFloat(E.target.value):E.target.value;v(f.name,T)},g=E=>{v(f.name,E)};return l.createElement(le,{key:f.name,label:f.label,type:f.type,name:f.name,value:a[f.name],onChange:N,onArrayChange:g,required:f.required,error:s[f.name],placeholder:f.placeholder,helpText:f.helpText,step:f.step,rows:f.rows||4,options:f.options,min:f.min,max:f.max,minLength:f.minLength,maxLength:f.maxLength,pattern:f.pattern,paramType:f.paramType||"body",itemType:f.itemType,itemOptions:f.itemOptions,itemFields:f.itemFields,domain:f.type==="domain"?i[f.domain]:void 0,domainName:f.domain})};return l.createElement("form",{className:"request-form",onSubmit:y,onKeyDown:b,noValidate:!0},e.sections?e.sections.map((f,N)=>l.createElement("div",{key:N,className:"form-section"},f.title&&l.createElement("h4",{className:"section-title"},f.title),f.description&&l.createElement("p",{className:"section-description"},f.description),l.createElement("div",{className:"section-fields"},(f.fields||[]).map(g=>A(g))))):(e.fields||[]).map(f=>A(f)),l.createElement("div",{className:"form-actions"},l.createElement("button",{type:"submit",className:"btn-primary btn-submit",disabled:c},c?"Sende...":"API aufrufen"),l.createElement("button",{type:"button",className:"btn-secondary",onClick:x},"\u{1F4CB} Beispielwerte f\xFCllen"),l.createElement("small",{className:"hint"},"Tipp: Strg+Enter zum Absenden")))}function De({variant:e="status",type:n="success",children:r,className:i=""}){let t="";return e==="status"?t=`status-badge ${n==="success"?"status-success":"status-error"}`:e==="duration"&&(t="duration-badge"),l.createElement("div",{className:`${t} ${i}`.trim()},r)}function We({response:e}){let n=ie(null),[r,i]=S(!1),t=a=>(typeof a!="string"&&(a=Ve(a)),a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"([^"]+)":/g,'<span class="json-key">"$1"</span>:').replace(/: "([^"]*)"/g,': <span class="json-string">"$1"</span>').replace(/: (true|false)/g,': <span class="json-boolean">$1</span>').replace(/: (null)/g,': <span class="json-null">$1</span>').replace(/: (-?\d+\.?\d*)/g,': <span class="json-number">$1</span>'));return W(()=>{if(n.current&&e&&e.data!==null){let a=Ve(e.data),o=t(a);n.current.innerHTML=o}},[e]),e?l.createElement("div",{className:"response-viewer"},l.createElement("div",{className:"response-header"},l.createElement("h3",null,"Response"),l.createElement(De,{variant:"status",type:e.ok?"success":"error"},"HTTP ",e.status," ",e.statusText),e.duration&&l.createElement(De,{variant:"duration"},e.duration,"ms")),e.headers&&Object.keys(e.headers).length>0&&l.createElement("div",{className:"response-headers-section"},l.createElement("button",{className:"response-headers-toggle",onClick:()=>i(!r)},l.createElement("span",{className:"response-headers-arrow"},r?"\u25BE":"\u25B8"),"Headers (",Object.keys(e.headers).length,")"),r&&l.createElement("div",{className:"response-headers-list"},Object.entries(e.headers).map(([a,o])=>l.createElement("div",{key:a,className:"response-header-item"},l.createElement("span",{className:"response-header-key"},a),l.createElement("span",{className:"response-header-value"},o))))),e.error?l.createElement("pre",{className:"response-content error"},"Fehler: ",e.error):l.createElement("pre",{ref:n,className:"response-content"})):l.createElement("div",{className:"response-viewer"},l.createElement("h3",null,"Response"),l.createElement("pre",{className:"response-content"},"Noch keine Anfrage gesendet."))}function Ge({message:e,onConfirm:n,onCancel:r,confirmLabel:i,cancelLabel:t="Abbrechen",danger:a=!0,variant:o="confirm",type:s,autoClose:u}){let c=o==="alert",m=i||(c?"OK":"L\xF6schen"),p=c?n:r,v=ie(null);W(()=>{let d=A=>{A.key==="Escape"&&p(),c&&A.key==="Enter"&&n()};return document.addEventListener("keydown",d),v.current?.focus(),()=>document.removeEventListener("keydown",d)},[p,n,c]),W(()=>{if(u&&u>0){let d=setTimeout(()=>p(),u);return()=>clearTimeout(d)}},[u,p]);let y=d=>{d.target===d.currentTarget&&p()},b=s==="success"?"\u2705":s==="error"?"\u274C":null;return l.createElement("div",{className:"confirm-overlay",onClick:y},l.createElement("div",{className:"confirm-dialog"},l.createElement("p",{className:"confirm-message"},b&&l.createElement("span",{className:"confirm-icon"},b),e),l.createElement("div",{className:"confirm-actions"},!c&&l.createElement("button",{className:"btn-secondary btn-sm",onClick:r},t),l.createElement("button",{ref:v,className:`${c?"btn-primary":a?"btn-danger":"btn-primary"} btn-sm`,onClick:n},m))))}function me(){let[e,n]=S(null),r=G(()=>n(null),[]),i=G((o,s,u=2e3)=>{n({variant:"alert",message:o,type:s,autoClose:u,onConfirm:r})},[r]),t=G((o,s,u={})=>{n({variant:"confirm",message:o,onConfirm:()=>{s(),r()},onCancel:r,confirmLabel:u.confirmLabel,cancelLabel:u.cancelLabel,danger:u.danger!==void 0?u.danger:!0})},[r]),a=G(()=>e?l.createElement(Ge,{...e,onCancel:e.onCancel||r}):null,[e,r]);return{showAlert:i,showConfirm:t,DialogRenderer:a}}function Je({apiId:e}){let[n,r]=S("none"),[i,t]=S(""),[a,o]=S(""),[s,u]=S("X-API-Key"),[c,m]=S("header"),{showAlert:p,showConfirm:v,DialogRenderer:y}=me();W(()=>{if(e){let d=_e(e);d?(r(d.type),t(d.token||""),o(d.apiKey||""),u(d.keyName||d.headerName||"X-API-Key"),m(d.keyLocation||"header")):(r("none"),t(""),o(""),u("X-API-Key"),m("header"))}},[e]);let b=()=>{if(!e)return;let d={type:n};n==="bearer"?d.token=i:n==="apikey"&&(d.apiKey=a,d.keyName=s,d.keyLocation=c),Nn(e,d),p("Auth-Konfiguration gespeichert!","success")},x=()=>{e&&v("M\xF6chten Sie die Auth-Konfiguration wirklich l\xF6schen?",()=>{Cn(e),r("none"),t(""),o(""),u("X-API-Key"),m("header"),p("Auth-Konfiguration gel\xF6scht!","success")})};return e?l.createElement("div",{className:"auth-config"},l.createElement("h3",null,"Authentifizierung"),l.createElement(le,{label:"Auth-Typ:",type:"select",name:"auth-type",value:n,onChange:d=>r(d.target.value),options:[{value:"none",label:"Keine"},{value:"bearer",label:"Bearer Token"},{value:"apikey",label:"API Key"}]}),n==="bearer"&&l.createElement(le,{label:"Bearer Token:",type:"text",name:"bearer-token",value:i,onChange:d=>t(d.target.value),placeholder:"Token eingeben..."},l.createElement("small",{className:"warning"},"\u26A0\uFE0F Nur f\xFCr Testzwecke! Token wird in LocalStorage gespeichert.")),n==="apikey"&&l.createElement(l.Fragment,null,l.createElement(le,{label:"API Key:",type:"text",name:"api-key",value:a,onChange:d=>o(d.target.value),placeholder:"API Key eingeben..."}),l.createElement(le,{label:"Key-Name:",type:"text",name:"key-name",value:s,onChange:d=>u(d.target.value),placeholder:"z.B. api_key, X-API-Key"}),l.createElement(le,{label:"Senden als:",type:"select",name:"key-location",value:c,onChange:d=>m(d.target.value),options:[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"},{value:"cookie",label:"Cookie"}]},l.createElement("small",{className:"warning"},"\u26A0\uFE0F Nur f\xFCr Testzwecke! Key wird in LocalStorage gespeichert."))),l.createElement("div",{className:"auth-actions"},l.createElement("button",{onClick:b,className:"btn-primary"},"Speichern"),l.createElement("button",{onClick:x,className:"btn-secondary"},"L\xF6schen")),l.createElement(y,null)):l.createElement("div",{className:"auth-config"},l.createElement(oe,{icon:"\u{1F510}",message:"Bitte w\xE4hlen Sie zuerst eine API aus."}))}function ze({item:e,isFavorite:n,onToggleFavorite:r,onReplay:i,onDelete:t}){let a=e.status>=200&&e.status<300?"status-success":"status-error",o=s=>new Date(s).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return l.createElement("div",{className:"history-item"},l.createElement("div",{className:"history-item-header"},l.createElement("span",{className:"api-name"},e.apiName),l.createElement("span",{className:`status ${a}`},e.status," ",e.statusText),l.createElement("span",{className:"timestamp"},o(e.timestamp))),l.createElement("div",{className:"history-item-details"},l.createElement("div",{className:"endpoint"},l.createElement("strong",null,e.method)," ",e.endpoint),e.duration&&l.createElement("div",{className:"duration"},e.duration,"ms")),l.createElement("div",{className:"history-item-actions"},l.createElement("button",{className:"btn-icon",onClick:()=>r(e.id),title:n?"Favorit entfernen":"Als Favorit markieren"},n?"\u2B50":"\u2606"),l.createElement("button",{className:"btn-sm btn-primary",onClick:()=>i(e)},"\u21BB Wiederholen"),l.createElement("button",{className:"btn-sm btn-danger",onClick:()=>t(e.id)},"\u{1F5D1}\uFE0F L\xF6schen")))}function Xe({onReplay:e}){let[n,r]=S([]),[i,t]=S([]),[a,o]=S("all"),{showConfirm:s,DialogRenderer:u}=me(),c=()=>{let x=Oe();r(x);let d=x.filter(A=>wn(A.id)).map(A=>A.id);t(d)};W(()=>{c()},[]);let m=x=>{s("M\xF6chten Sie diesen Eintrag wirklich l\xF6schen?",()=>{yn(x),c()})},p=()=>{s("M\xF6chten Sie die gesamte Historie wirklich l\xF6schen?",()=>{xn(),c()})},v=x=>{An(x),c()},y=x=>{e({apiId:x.apiId,payload:x.payload})},b=a==="favorites"?n.filter(x=>i.includes(x.id)):n;return l.createElement("div",{className:"history"},l.createElement("div",{className:"history-header"},l.createElement("h3",null,"Request-Historie"),l.createElement("div",{className:"history-controls"},l.createElement("div",{className:"filter-buttons"},l.createElement("button",{className:a==="all"?"active":"",onClick:()=>o("all")},"Alle (",n.length,")"),l.createElement("button",{className:a==="favorites"?"active":"",onClick:()=>o("favorites")},"\u2B50 Favoriten (",i.length,")")),n.length>0&&l.createElement("button",{className:"btn-danger btn-sm",onClick:p},"Alle l\xF6schen"))),b.length===0?l.createElement(oe,{icon:a==="favorites"?"\u2B50":"\u{1F4DC}",message:a==="favorites"?"Keine Favoriten vorhanden.":"Noch keine Requests in der Historie."}):l.createElement("div",{className:"history-list"},b.map(x=>l.createElement(ze,{key:x.id,item:x,isFavorite:i.includes(x.id),onToggleFavorite:v,onReplay:y,onDelete:m}))),l.createElement(u,null))}function Qe({tabs:e,activeTab:n,onChange:r,className:i=""}){return l.createElement("div",{className:`tabs ${i}`.trim()},e.map(t=>l.createElement("button",{key:t.id,className:`tab ${n===t.id?"active":""}`,onClick:()=>r(t.id)},t.label)))}function Ln(e,n={}){let{baseUrl:r="",selectedPaths:i=null,sourceOrigin:t=null}=n;if(!e||!e.paths)throw new Error('Ung\xFCltige OpenAPI Specification: "paths" fehlt');let a=[],o=e.paths;for(let[s,u]of Object.entries(o))for(let[c,m]of Object.entries(u)){if(!["get","post","put","patch","delete"].includes(c.toLowerCase())||i&&!i.includes(`${c.toUpperCase()} ${s}`))continue;let p=Vr(s,c,m,e,r,t);p&&a.push(p)}return a}function Vr(e,n,r,i,t,a=null){let o=(r.operationId||`${n}_${e}`).toLowerCase().replace(/[^a-z0-9_]/g,"_"),s=r.summary||r.operationId||`${n.toUpperCase()} ${e}`,u=t?`${t}${e}`:Qr(i,a)+e,{fields:c,bodyPath:m}=Wr(r.requestBody,i),v=[...Gr(r.parameters,i),...c],y=Xr(i,r),b=r.tags&&r.tags.length>0?r.tags[0]:"Sonstige",x={id:o,name:s,description:r.description||r.summary||"",endpoint:u,method:n.toUpperCase(),auth:y,fields:v,tag:b};return m.length>0&&(x.bodyPath=m),x}function qr(e,n){let r=[],i=e;for(i&&i.$ref&&n&&(i=ye(i.$ref,n));i&&i.type==="object"&&i.properties;){let t=Object.keys(i.properties);if(t.length!==1)break;let a=t[0],o=i.properties[a];if(o.$ref&&n&&(o=ye(o.$ref,n)),!o||o.type!=="object"||!o.properties)break;(r.length===0||r[r.length-1]!==a)&&r.push(a),i=o}return{schema:i,bodyPath:r}}function Wr(e,n){if(!e||!e.content)return{fields:[],bodyPath:[]};let r=e.content["application/json"];if(!r||!r.schema)return{fields:[],bodyPath:[]};let{schema:i,bodyPath:t}=qr(r.schema,n),a=Dn(i,[],n);return a.forEach(o=>{o.paramType="body"}),{fields:a,bodyPath:t}}function Gr(e,n){if(!e||e.length===0)return[];let r=[];for(let i of e){if(i.$ref&&n&&(i=ye(i.$ref,n),!i)||!["query","path","header"].includes(i.in))continue;let t={name:i.name,label:Mn(i.name),required:i.required||i.in==="path",paramType:i.in},a=i.schema||{};switch(a.type){case"string":t.type="text";break;case"integer":case"number":t.type="number";break;case"boolean":t.type="select",t.options=[{value:"true",label:"true"},{value:"false",label:"false"}];break;case"array":t.type="array",a.items?a.items.enum?(t.itemType="select",t.itemOptions=a.items.enum.map(o=>({value:o.toString(),label:o.toString()}))):a.items.type==="integer"||a.items.type==="number"?t.itemType="number":t.itemType="text":t.itemType="text";break;default:t.type="text"}a.enum&&t.type!=="array"&&(t.type="select",t.options=a.enum.map(o=>({value:o.toString(),label:o.toString()}))),Pn(t,a),a.default!==void 0&&(t.defaultValue=a.default),i.description&&(t.helpText=i.description),a.example!==void 0?t.exampleValue=a.example:i.example!==void 0&&(t.exampleValue=i.example),r.push(t)}return r}function Dn(e,n=[],r=null){let i=[];if(e.$ref&&r&&(e=ye(e.$ref,r)),!e||!e.properties)return i;let t=e.required||n;for(let[a,o]of Object.entries(e.properties)){let s=o;o.$ref&&r&&(s=ye(o.$ref,r));let u=Jr(a,s,t.includes(a),r);u&&i.push(u)}return i}function Jr(e,n,r,i=null){let t={name:e,label:n.title||Mn(e),required:r};switch(n.type){case"string":t.type=zr(n);break;case"integer":case"number":t.type="number";break;case"boolean":t.type="select",t.options=[{value:!0,label:"Ja"},{value:!1,label:"Nein"}];break;case"array":if(t.type="array",n.items){let a=n.items;a.$ref&&i&&(a=ye(a.$ref,i)),a?a.type==="object"||a.properties?(t.itemType="object",t.itemFields=Dn(a,[],i)):a.enum?(t.itemType="select",t.itemOptions=a.enum.map(o=>({value:o.toString(),label:o.toString()}))):a.type==="integer"||a.type==="number"?t.itemType="number":t.itemType="text":t.itemType="text"}else t.itemType="text";break;default:t.type="text"}return n.enum&&(t.type="select",t.options=n.enum.map(a=>({value:a,label:a.toString()}))),Pn(t,n),n.default!==void 0&&(t.defaultValue=n.default),n.description&&(t.helpText=n.description),n.example!==void 0&&(t.exampleValue=n.example),t}function ye(e,n){if(!e||!e.startsWith("#/"))return null;let r=e.substring(2).split("/"),i=n;for(let t of r){if(!i||!i[t])return console.warn(`Could not resolve $ref: ${e}`),null;i=i[t]}return i}function zr(e){switch(e.format){case"date":case"date-time":return"date";case"email":return"text";default:return e.maxLength&&e.maxLength>100?"textarea":"text"}}function Pn(e,n){n.type==="string"&&(n.minLength!==void 0&&(e.minLength=n.minLength),n.maxLength!==void 0&&(e.maxLength=n.maxLength),n.pattern&&(e.pattern=n.pattern),n.format==="email"&&(e.pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",e.patternError="Bitte g\xFCltige E-Mail-Adresse eingeben")),(n.type==="number"||n.type==="integer")&&(n.minimum!==void 0&&(e.min=n.minimum),n.maximum!==void 0&&(e.max=n.maximum),n.type==="integer"&&(e.step=1)),(n.format==="date"||n.format==="date-time")&&(n.minimum!==void 0&&(e.min=n.minimum),n.maximum!==void 0&&(e.max=n.maximum))}function Xr(e,n){let r={type:"none"},i=n.security||e.security;if(!i||i.length===0)return r;let t=i[0],a=Object.keys(t)[0];if(!e.components||!e.components.securitySchemes)return r;let o=e.components.securitySchemes[a];if(!o)return r;switch(o.type){case"http":o.scheme==="bearer"&&(r={type:"bearer"});break;case"apiKey":r={type:"apikey",keyName:o.name||"X-API-Key",keyLocation:o.in||"header"};break;default:r={type:"none"}}return r}function Qr(e,n=null){if(e.servers&&e.servers.length>0){let r=e.servers[0].url;return r&&r.startsWith("/")?n?n+r:(console.warn("\u26A0\uFE0F OpenAPI server URL ist relativ, aber keine sourceOrigin verf\xFCgbar:",r),""):r||""}return console.warn("\u26A0\uFE0F Keine Server-Definition in OpenAPI Spec gefunden"),""}function Mn(e){return e.replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\b\w/g,n=>n.toUpperCase()).trim()}function Zn(e){return typeof e>"u"||e===null}function Zr(e){return typeof e=="object"&&e!==null}function Rr(e){return Array.isArray(e)?e:Zn(e)?[]:[e]}function ei(e,n){var r,i,t,a;if(n)for(a=Object.keys(n),r=0,i=a.length;r<i;r+=1)t=a[r],e[t]=n[t];return e}function ni(e,n){var r="",i;for(i=0;i<n;i+=1)r+=e;return r}function ri(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var ii=Zn,ti=Zr,oi=Rr,ai=ni,li=ri,si=ei,U={isNothing:ii,isObject:ti,toArray:oi,repeat:ai,isNegativeZero:li,extend:si};function Rn(e,n){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}function ke(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=Rn(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ke.prototype=Object.create(Error.prototype);ke.prototype.constructor=ke;ke.prototype.toString=function(n){return this.name+": "+Rn(this,n)};var Q=ke;function Ze(e,n,r,i,t){var a="",o="",s=Math.floor(t/2)-1;return i-n>s&&(a=" ... ",n=i-s+a.length),r-i>s&&(o=" ...",r=i+s-o.length),{str:a+e.slice(n,r).replace(/\t/g,"\u2192")+o,pos:i-n+a.length}}function Re(e,n){return U.repeat(" ",n-e.length)+e}function ui(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],t=[],a,o=-1;a=r.exec(e.buffer);)t.push(a.index),i.push(a.index+a[0].length),e.position<=a.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var s="",u,c,m=Math.min(e.line+n.linesAfter,t.length).toString().length,p=n.maxLength-(n.indent+m+3);for(u=1;u<=n.linesBefore&&!(o-u<0);u++)c=Ze(e.buffer,i[o-u],t[o-u],e.position-(i[o]-i[o-u]),p),s=U.repeat(" ",n.indent)+Re((e.line-u+1).toString(),m)+" | "+c.str+`
`+s;for(c=Ze(e.buffer,i[o],t[o],e.position,p),s+=U.repeat(" ",n.indent)+Re((e.line+1).toString(),m)+" | "+c.str+`
`,s+=U.repeat("-",n.indent+m+3+c.pos)+`^
`,u=1;u<=n.linesAfter&&!(o+u>=t.length);u++)c=Ze(e.buffer,i[o+u],t[o+u],e.position-(i[o]-i[o+u]),p),s+=U.repeat(" ",n.indent)+Re((e.line+u+1).toString(),m)+" | "+c.str+`
`;return s.replace(/\n$/,"")}var ci=ui,pi=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],fi=["scalar","sequence","mapping"];function di(e){var n={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){n[String(i)]=r})}),n}function mi(e,n){if(n=n||{},Object.keys(n).forEach(function(r){if(pi.indexOf(r)===-1)throw new Q('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(r){return r},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=di(n.styleAliases||null),fi.indexOf(this.kind)===-1)throw new Q('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var J=mi;function $n(e,n){var r=[];return e[n].forEach(function(i){var t=r.length;r.forEach(function(a,o){a.tag===i.tag&&a.kind===i.kind&&a.multi===i.multi&&(t=o)}),r[t]=i}),r}function hi(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,r;function i(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(n=0,r=arguments.length;n<r;n+=1)arguments[n].forEach(i);return e}function nn(e){return this.extend(e)}nn.prototype.extend=function(n){var r=[],i=[];if(n instanceof J)i.push(n);else if(Array.isArray(n))i=i.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(r=r.concat(n.implicit)),n.explicit&&(i=i.concat(n.explicit));else throw new Q("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(a){if(!(a instanceof J))throw new Q("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new Q("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new Q("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(a){if(!(a instanceof J))throw new Q("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create(nn.prototype);return t.implicit=(this.implicit||[]).concat(r),t.explicit=(this.explicit||[]).concat(i),t.compiledImplicit=$n(t,"implicit"),t.compiledExplicit=$n(t,"explicit"),t.compiledTypeMap=hi(t.compiledImplicit,t.compiledExplicit),t};var er=nn,nr=new J("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),rr=new J("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),ir=new J("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),tr=new er({explicit:[nr,rr,ir]});function gi(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function vi(){return null}function yi(e){return e===null}var or=new J("tag:yaml.org,2002:null",{kind:"scalar",resolve:gi,construct:vi,predicate:yi,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function xi(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function bi(e){return e==="true"||e==="True"||e==="TRUE"}function Ai(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var ar=new J("tag:yaml.org,2002:bool",{kind:"scalar",resolve:xi,construct:bi,predicate:Ai,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function wi(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ni(e){return 48<=e&&e<=55}function Ci(e){return 48<=e&&e<=57}function Si(e){if(e===null)return!1;var n=e.length,r=0,i=!1,t;if(!n)return!1;if(t=e[r],(t==="-"||t==="+")&&(t=e[++r]),t==="0"){if(r+1===n)return!0;if(t=e[++r],t==="b"){for(r++;r<n;r++)if(t=e[r],t!=="_"){if(t!=="0"&&t!=="1")return!1;i=!0}return i&&t!=="_"}if(t==="x"){for(r++;r<n;r++)if(t=e[r],t!=="_"){if(!wi(e.charCodeAt(r)))return!1;i=!0}return i&&t!=="_"}if(t==="o"){for(r++;r<n;r++)if(t=e[r],t!=="_"){if(!Ni(e.charCodeAt(r)))return!1;i=!0}return i&&t!=="_"}}if(t==="_")return!1;for(;r<n;r++)if(t=e[r],t!=="_"){if(!Ci(e.charCodeAt(r)))return!1;i=!0}return!(!i||t==="_")}function ki(e){var n=e,r=1,i;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),i=n[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),n=n.slice(1),i=n[0]),n==="0")return 0;if(i==="0"){if(n[1]==="b")return r*parseInt(n.slice(2),2);if(n[1]==="x")return r*parseInt(n.slice(2),16);if(n[1]==="o")return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)}function Ei(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!U.isNegativeZero(e)}var lr=new J("tag:yaml.org,2002:int",{kind:"scalar",resolve:Si,construct:ki,predicate:Ei,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ti=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ii(e){return!(e===null||!Ti.test(e)||e[e.length-1]==="_")}function Fi(e){var n,r;return n=e.replace(/_/g,"").toLowerCase(),r=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:r*parseFloat(n,10)}var Oi=/^[-+]?[0-9]+e/;function _i(e,n){var r;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(U.isNegativeZero(e))return"-0.0";return r=e.toString(10),Oi.test(r)?r.replace("e",".e"):r}function Li(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||U.isNegativeZero(e))}var sr=new J("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ii,construct:Fi,predicate:Li,represent:_i,defaultStyle:"lowercase"}),ur=tr.extend({implicit:[or,ar,lr,sr]}),cr=ur,pr=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fr=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Di(e){return e===null?!1:pr.exec(e)!==null||fr.exec(e)!==null}function Pi(e){var n,r,i,t,a,o,s,u=0,c=null,m,p,v;if(n=pr.exec(e),n===null&&(n=fr.exec(e)),n===null)throw new Error("Date resolve error");if(r=+n[1],i=+n[2]-1,t=+n[3],!n[4])return new Date(Date.UTC(r,i,t));if(a=+n[4],o=+n[5],s=+n[6],n[7]){for(u=n[7].slice(0,3);u.length<3;)u+="0";u=+u}return n[9]&&(m=+n[10],p=+(n[11]||0),c=(m*60+p)*6e4,n[9]==="-"&&(c=-c)),v=new Date(Date.UTC(r,i,t,a,o,s,u)),c&&v.setTime(v.getTime()-c),v}function Mi(e){return e.toISOString()}var dr=new J("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Di,construct:Pi,instanceOf:Date,represent:Mi});function $i(e){return e==="<<"||e===null}var mr=new J("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$i}),ln=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ji(e){if(e===null)return!1;var n,r,i=0,t=e.length,a=ln;for(r=0;r<t;r++)if(n=a.indexOf(e.charAt(r)),!(n>64)){if(n<0)return!1;i+=6}return i%8===0}function Hi(e){var n,r,i=e.replace(/[\r\n=]/g,""),t=i.length,a=ln,o=0,s=[];for(n=0;n<t;n++)n%4===0&&n&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|a.indexOf(i.charAt(n));return r=t%4*6,r===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):r===18?(s.push(o>>10&255),s.push(o>>2&255)):r===12&&s.push(o>>4&255),new Uint8Array(s)}function Bi(e){var n="",r=0,i,t,a=e.length,o=ln;for(i=0;i<a;i++)i%3===0&&i&&(n+=o[r>>18&63],n+=o[r>>12&63],n+=o[r>>6&63],n+=o[r&63]),r=(r<<8)+e[i];return t=a%3,t===0?(n+=o[r>>18&63],n+=o[r>>12&63],n+=o[r>>6&63],n+=o[r&63]):t===2?(n+=o[r>>10&63],n+=o[r>>4&63],n+=o[r<<2&63],n+=o[64]):t===1&&(n+=o[r>>2&63],n+=o[r<<4&63],n+=o[64],n+=o[64]),n}function Ki(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var hr=new J("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ji,construct:Hi,predicate:Ki,represent:Bi}),Ui=Object.prototype.hasOwnProperty,Yi=Object.prototype.toString;function Vi(e){if(e===null)return!0;var n=[],r,i,t,a,o,s=e;for(r=0,i=s.length;r<i;r+=1){if(t=s[r],o=!1,Yi.call(t)!=="[object Object]")return!1;for(a in t)if(Ui.call(t,a))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(a)===-1)n.push(a);else return!1}return!0}function qi(e){return e!==null?e:[]}var gr=new J("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Vi,construct:qi}),Wi=Object.prototype.toString;function Gi(e){if(e===null)return!0;var n,r,i,t,a,o=e;for(a=new Array(o.length),n=0,r=o.length;n<r;n+=1){if(i=o[n],Wi.call(i)!=="[object Object]"||(t=Object.keys(i),t.length!==1))return!1;a[n]=[t[0],i[t[0]]]}return!0}function Ji(e){if(e===null)return[];var n,r,i,t,a,o=e;for(a=new Array(o.length),n=0,r=o.length;n<r;n+=1)i=o[n],t=Object.keys(i),a[n]=[t[0],i[t[0]]];return a}var vr=new J("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Gi,construct:Ji}),zi=Object.prototype.hasOwnProperty;function Xi(e){if(e===null)return!0;var n,r=e;for(n in r)if(zi.call(r,n)&&r[n]!==null)return!1;return!0}function Qi(e){return e!==null?e:{}}var yr=new J("tag:yaml.org,2002:set",{kind:"mapping",resolve:Xi,construct:Qi}),sn=cr.extend({implicit:[dr,mr],explicit:[hr,gr,vr,yr]}),ce=Object.prototype.hasOwnProperty,Pe=1,xr=2,br=3,Me=4,en=1,Zi=2,jn=3,Ri=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,et=/[\x85\u2028\u2029]/,nt=/[,\[\]\{\}]/,Ar=/^(?:!|!!|![a-z\-]+!)$/i,wr=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Hn(e){return Object.prototype.toString.call(e)}function ae(e){return e===10||e===13}function ge(e){return e===9||e===32}function R(e){return e===9||e===32||e===10||e===13}function be(e){return e===44||e===91||e===93||e===123||e===125}function rt(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function it(e){return e===120?2:e===117?4:e===85?8:0}function tt(e){return 48<=e&&e<=57?e-48:-1}function Bn(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function ot(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function Nr(e,n,r){n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[n]=r}var Cr=new Array(256),Sr=new Array(256);for(he=0;he<256;he++)Cr[he]=Bn(he)?1:0,Sr[he]=Bn(he);var he;function at(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||sn,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function kr(e,n){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=ci(r),new Q(n,r)}function C(e,n){throw kr(e,n)}function $e(e,n){e.onWarning&&e.onWarning.call(null,kr(e,n))}var Kn={YAML:function(n,r,i){var t,a,o;n.version!==null&&C(n,"duplication of %YAML directive"),i.length!==1&&C(n,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),t===null&&C(n,"ill-formed argument of the YAML directive"),a=parseInt(t[1],10),o=parseInt(t[2],10),a!==1&&C(n,"unacceptable YAML version of the document"),n.version=i[0],n.checkLineBreaks=o<2,o!==1&&o!==2&&$e(n,"unsupported YAML version of the document")},TAG:function(n,r,i){var t,a;i.length!==2&&C(n,"TAG directive accepts exactly two arguments"),t=i[0],a=i[1],Ar.test(t)||C(n,"ill-formed tag handle (first argument) of the TAG directive"),ce.call(n.tagMap,t)&&C(n,'there is a previously declared suffix for "'+t+'" tag handle'),wr.test(a)||C(n,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{C(n,"tag prefix is malformed: "+a)}n.tagMap[t]=a}};function ue(e,n,r,i){var t,a,o,s;if(n<r){if(s=e.input.slice(n,r),i)for(t=0,a=s.length;t<a;t+=1)o=s.charCodeAt(t),o===9||32<=o&&o<=1114111||C(e,"expected valid JSON character");else Ri.test(s)&&C(e,"the stream contains non-printable characters");e.result+=s}}function Un(e,n,r,i){var t,a,o,s;for(U.isObject(r)||C(e,"cannot merge mappings; the provided source object is unacceptable"),t=Object.keys(r),o=0,s=t.length;o<s;o+=1)a=t[o],ce.call(n,a)||(Nr(n,a,r[a]),i[a]=!0)}function Ae(e,n,r,i,t,a,o,s,u){var c,m;if(Array.isArray(t))for(t=Array.prototype.slice.call(t),c=0,m=t.length;c<m;c+=1)Array.isArray(t[c])&&C(e,"nested arrays are not supported inside keys"),typeof t=="object"&&Hn(t[c])==="[object Object]"&&(t[c]="[object Object]");if(typeof t=="object"&&Hn(t)==="[object Object]"&&(t="[object Object]"),t=String(t),n===null&&(n={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(c=0,m=a.length;c<m;c+=1)Un(e,n,a[c],r);else Un(e,n,a,r);else!e.json&&!ce.call(r,t)&&ce.call(n,t)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=u||e.position,C(e,"duplicated mapping key")),Nr(n,t,a),delete r[t];return n}function un(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):C(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function B(e,n,r){for(var i=0,t=e.input.charCodeAt(e.position);t!==0;){for(;ge(t);)t===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),t=e.input.charCodeAt(++e.position);if(n&&t===35)do t=e.input.charCodeAt(++e.position);while(t!==10&&t!==13&&t!==0);if(ae(t))for(un(e),t=e.input.charCodeAt(e.position),i++,e.lineIndent=0;t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&$e(e,"deficient indentation"),i}function Be(e){var n=e.position,r;return r=e.input.charCodeAt(n),!!((r===45||r===46)&&r===e.input.charCodeAt(n+1)&&r===e.input.charCodeAt(n+2)&&(n+=3,r=e.input.charCodeAt(n),r===0||R(r)))}function cn(e,n){n===1?e.result+=" ":n>1&&(e.result+=U.repeat(`
`,n-1))}function lt(e,n,r){var i,t,a,o,s,u,c,m,p=e.kind,v=e.result,y;if(y=e.input.charCodeAt(e.position),R(y)||be(y)||y===35||y===38||y===42||y===33||y===124||y===62||y===39||y===34||y===37||y===64||y===96||(y===63||y===45)&&(t=e.input.charCodeAt(e.position+1),R(t)||r&&be(t)))return!1;for(e.kind="scalar",e.result="",a=o=e.position,s=!1;y!==0;){if(y===58){if(t=e.input.charCodeAt(e.position+1),R(t)||r&&be(t))break}else if(y===35){if(i=e.input.charCodeAt(e.position-1),R(i))break}else{if(e.position===e.lineStart&&Be(e)||r&&be(y))break;if(ae(y))if(u=e.line,c=e.lineStart,m=e.lineIndent,B(e,!1,-1),e.lineIndent>=n){s=!0,y=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=u,e.lineStart=c,e.lineIndent=m;break}}s&&(ue(e,a,o,!1),cn(e,e.line-u),a=o=e.position,s=!1),ge(y)||(o=e.position+1),y=e.input.charCodeAt(++e.position)}return ue(e,a,o,!1),e.result?!0:(e.kind=p,e.result=v,!1)}function st(e,n){var r,i,t;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=t=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ue(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,t=e.position;else return!0;else ae(r)?(ue(e,i,t,!0),cn(e,B(e,!1,n)),i=t=e.position):e.position===e.lineStart&&Be(e)?C(e,"unexpected end of the document within a single quoted scalar"):(e.position++,t=e.position);C(e,"unexpected end of the stream within a single quoted scalar")}function ut(e,n){var r,i,t,a,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return ue(e,r,e.position,!0),e.position++,!0;if(s===92){if(ue(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),ae(s))B(e,!1,n);else if(s<256&&Cr[s])e.result+=Sr[s],e.position++;else if((o=it(s))>0){for(t=o,a=0;t>0;t--)s=e.input.charCodeAt(++e.position),(o=rt(s))>=0?a=(a<<4)+o:C(e,"expected hexadecimal character");e.result+=ot(a),e.position++}else C(e,"unknown escape sequence");r=i=e.position}else ae(s)?(ue(e,r,i,!0),cn(e,B(e,!1,n)),r=i=e.position):e.position===e.lineStart&&Be(e)?C(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}C(e,"unexpected end of the stream within a double quoted scalar")}function ct(e,n){var r=!0,i,t,a,o=e.tag,s,u=e.anchor,c,m,p,v,y,b=Object.create(null),x,d,A,f;if(f=e.input.charCodeAt(e.position),f===91)m=93,y=!1,s=[];else if(f===123)m=125,y=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),f=e.input.charCodeAt(++e.position);f!==0;){if(B(e,!0,n),f=e.input.charCodeAt(e.position),f===m)return e.position++,e.tag=o,e.anchor=u,e.kind=y?"mapping":"sequence",e.result=s,!0;r?f===44&&C(e,"expected the node content, but found ','"):C(e,"missed comma between flow collection entries"),d=x=A=null,p=v=!1,f===63&&(c=e.input.charCodeAt(e.position+1),R(c)&&(p=v=!0,e.position++,B(e,!0,n))),i=e.line,t=e.lineStart,a=e.position,we(e,n,Pe,!1,!0),d=e.tag,x=e.result,B(e,!0,n),f=e.input.charCodeAt(e.position),(v||e.line===i)&&f===58&&(p=!0,f=e.input.charCodeAt(++e.position),B(e,!0,n),we(e,n,Pe,!1,!0),A=e.result),y?Ae(e,s,b,d,x,A,i,t,a):p?s.push(Ae(e,null,b,d,x,A,i,t,a)):s.push(x),B(e,!0,n),f=e.input.charCodeAt(e.position),f===44?(r=!0,f=e.input.charCodeAt(++e.position)):r=!1}C(e,"unexpected end of the stream within a flow collection")}function pt(e,n){var r,i,t=en,a=!1,o=!1,s=n,u=0,c=!1,m,p;if(p=e.input.charCodeAt(e.position),p===124)i=!1;else if(p===62)i=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)en===t?t=p===43?jn:Zi:C(e,"repeat of a chomping mode identifier");else if((m=tt(p))>=0)m===0?C(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?C(e,"repeat of an indentation width identifier"):(s=n+m-1,o=!0);else break;if(ge(p)){do p=e.input.charCodeAt(++e.position);while(ge(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!ae(p)&&p!==0)}for(;p!==0;){for(un(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),ae(p)){u++;continue}if(e.lineIndent<s){t===jn?e.result+=U.repeat(`
`,a?1+u:u):t===en&&a&&(e.result+=`
`);break}for(i?ge(p)?(c=!0,e.result+=U.repeat(`
`,a?1+u:u)):c?(c=!1,e.result+=U.repeat(`
`,u+1)):u===0?a&&(e.result+=" "):e.result+=U.repeat(`
`,u):e.result+=U.repeat(`
`,a?1+u:u),a=!0,o=!0,u=0,r=e.position;!ae(p)&&p!==0;)p=e.input.charCodeAt(++e.position);ue(e,r,e.position,!1)}return!0}function Yn(e,n){var r,i=e.tag,t=e.anchor,a=[],o,s=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,C(e,"tab characters must not be used in indentation")),!(u!==45||(o=e.input.charCodeAt(e.position+1),!R(o))));){if(s=!0,e.position++,B(e,!0,-1)&&e.lineIndent<=n){a.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,we(e,n,br,!1,!0),a.push(e.result),B(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>n)&&u!==0)C(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return s?(e.tag=i,e.anchor=t,e.kind="sequence",e.result=a,!0):!1}function ft(e,n,r){var i,t,a,o,s,u,c=e.tag,m=e.anchor,p={},v=Object.create(null),y=null,b=null,x=null,d=!1,A=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),f=e.input.charCodeAt(e.position);f!==0;){if(!d&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,C(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),a=e.line,(f===63||f===58)&&R(i))f===63?(d&&(Ae(e,p,v,y,b,null,o,s,u),y=b=x=null),A=!0,d=!0,t=!0):d?(d=!1,t=!0):C(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,f=i;else{if(o=e.line,s=e.lineStart,u=e.position,!we(e,r,xr,!1,!0))break;if(e.line===a){for(f=e.input.charCodeAt(e.position);ge(f);)f=e.input.charCodeAt(++e.position);if(f===58)f=e.input.charCodeAt(++e.position),R(f)||C(e,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Ae(e,p,v,y,b,null,o,s,u),y=b=x=null),A=!0,d=!1,t=!1,y=e.tag,b=e.result;else if(A)C(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=m,!0}else if(A)C(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=m,!0}if((e.line===a||e.lineIndent>n)&&(d&&(o=e.line,s=e.lineStart,u=e.position),we(e,n,Me,!0,t)&&(d?b=e.result:x=e.result),d||(Ae(e,p,v,y,b,x,o,s,u),y=b=x=null),B(e,!0,-1),f=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>n)&&f!==0)C(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return d&&Ae(e,p,v,y,b,null,o,s,u),A&&(e.tag=c,e.anchor=m,e.kind="mapping",e.result=p),A}function dt(e){var n,r=!1,i=!1,t,a,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&C(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,t="!!",o=e.input.charCodeAt(++e.position)):t="!",n=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(a=e.input.slice(n,e.position),o=e.input.charCodeAt(++e.position)):C(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!R(o);)o===33&&(i?C(e,"tag suffix cannot contain exclamation marks"):(t=e.input.slice(n-1,e.position+1),Ar.test(t)||C(e,"named tag handle cannot contain such characters"),i=!0,n=e.position+1)),o=e.input.charCodeAt(++e.position);a=e.input.slice(n,e.position),nt.test(a)&&C(e,"tag suffix cannot contain flow indicator characters")}a&&!wr.test(a)&&C(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{C(e,"tag name is malformed: "+a)}return r?e.tag=a:ce.call(e.tagMap,t)?e.tag=e.tagMap[t]+a:t==="!"?e.tag="!"+a:t==="!!"?e.tag="tag:yaml.org,2002:"+a:C(e,'undeclared tag handle "'+t+'"'),!0}function mt(e){var n,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&C(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!R(r)&&!be(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&C(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function ht(e){var n,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!R(i)&&!be(i);)i=e.input.charCodeAt(++e.position);return e.position===n&&C(e,"name of an alias node must contain at least one character"),r=e.input.slice(n,e.position),ce.call(e.anchorMap,r)||C(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],B(e,!0,-1),!0}function we(e,n,r,i,t){var a,o,s,u=1,c=!1,m=!1,p,v,y,b,x,d;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=s=Me===r||br===r,i&&B(e,!0,-1)&&(c=!0,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)),u===1)for(;dt(e)||mt(e);)B(e,!0,-1)?(c=!0,s=a,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)):s=!1;if(s&&(s=c||t),(u===1||Me===r)&&(Pe===r||xr===r?x=n:x=n+1,d=e.position-e.lineStart,u===1?s&&(Yn(e,d)||ft(e,d,x))||ct(e,x)?m=!0:(o&&pt(e,x)||st(e,x)||ut(e,x)?m=!0:ht(e)?(m=!0,(e.tag!==null||e.anchor!==null)&&C(e,"alias node should not have any properties")):lt(e,x,Pe===r)&&(m=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(m=s&&Yn(e,d))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&C(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,v=e.implicitTypes.length;p<v;p+=1)if(b=e.implicitTypes[p],b.resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ce.call(e.typeMap[e.kind||"fallback"],e.tag))b=e.typeMap[e.kind||"fallback"][e.tag];else for(b=null,y=e.typeMap.multi[e.kind||"fallback"],p=0,v=y.length;p<v;p+=1)if(e.tag.slice(0,y[p].tag.length)===y[p].tag){b=y[p];break}b||C(e,"unknown tag !<"+e.tag+">"),e.result!==null&&b.kind!==e.kind&&C(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result,e.tag)?(e.result=b.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):C(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||m}function gt(e){var n=e.position,r,i,t,a=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(B(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(a=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!R(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),t=[],i.length<1&&C(e,"directive name must not be less than one character in length");o!==0;){for(;ge(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!ae(o));break}if(ae(o))break;for(r=e.position;o!==0&&!R(o);)o=e.input.charCodeAt(++e.position);t.push(e.input.slice(r,e.position))}o!==0&&un(e),ce.call(Kn,i)?Kn[i](e,i,t):$e(e,'unknown document directive "'+i+'"')}if(B(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,B(e,!0,-1)):a&&C(e,"directives end mark is expected"),we(e,e.lineIndent-1,Me,!1,!0),B(e,!0,-1),e.checkLineBreaks&&et.test(e.input.slice(n,e.position))&&$e(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Be(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,B(e,!0,-1));return}if(e.position<e.length-1)C(e,"end of the stream or a document separator is expected");else return}function Er(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new at(e,n),i=e.indexOf("\0");for(i!==-1&&(r.position=i,C(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)gt(r);return r.documents}function vt(e,n,r){n!==null&&typeof n=="object"&&typeof r>"u"&&(r=n,n=null);var i=Er(e,r);if(typeof n!="function")return i;for(var t=0,a=i.length;t<a;t+=1)n(i[t])}function yt(e,n){var r=Er(e,n);if(r.length!==0){if(r.length===1)return r[0];throw new Q("expected a single document in the stream, but found more")}}var xt=vt,bt=yt,Tr={loadAll:xt,load:bt},Ir=Object.prototype.toString,Fr=Object.prototype.hasOwnProperty,pn=65279,At=9,Ee=10,wt=13,Nt=32,Ct=33,St=34,rn=35,kt=37,Et=38,Tt=39,It=42,Or=44,Ft=45,je=58,Ot=61,_t=62,Lt=63,Dt=64,_r=91,Lr=93,Pt=96,Dr=123,Mt=124,Pr=125,z={};z[0]="\\0";z[7]="\\a";z[8]="\\b";z[9]="\\t";z[10]="\\n";z[11]="\\v";z[12]="\\f";z[13]="\\r";z[27]="\\e";z[34]='\\"';z[92]="\\\\";z[133]="\\N";z[160]="\\_";z[8232]="\\L";z[8233]="\\P";var $t=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],jt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ht(e,n){var r,i,t,a,o,s,u;if(n===null)return{};for(r={},i=Object.keys(n),t=0,a=i.length;t<a;t+=1)o=i[t],s=String(n[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=e.compiledTypeMap.fallback[o],u&&Fr.call(u.styleAliases,s)&&(s=u.styleAliases[s]),r[o]=s;return r}function Bt(e){var n,r,i;if(n=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new Q("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+U.repeat("0",i-n.length)+n}var Kt=1,Te=2;function Ut(e){this.schema=e.schema||sn,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=U.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Ht(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Te:Kt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Vn(e,n){for(var r=U.repeat(" ",n),i=0,t=-1,a="",o,s=e.length;i<s;)t=e.indexOf(`
`,i),t===-1?(o=e.slice(i),i=s):(o=e.slice(i,t+1),i=t+1),o.length&&o!==`
`&&(a+=r),a+=o;return a}function tn(e,n){return`
`+U.repeat(" ",e.indent*n)}function Yt(e,n){var r,i,t;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(t=e.implicitTypes[r],t.resolve(n))return!0;return!1}function He(e){return e===Nt||e===At}function Ie(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==pn||65536<=e&&e<=1114111}function qn(e){return Ie(e)&&e!==pn&&e!==wt&&e!==Ee}function Wn(e,n,r){var i=qn(e),t=i&&!He(e);return(r?i:i&&e!==Or&&e!==_r&&e!==Lr&&e!==Dr&&e!==Pr)&&e!==rn&&!(n===je&&!t)||qn(n)&&!He(n)&&e===rn||n===je&&t}function Vt(e){return Ie(e)&&e!==pn&&!He(e)&&e!==Ft&&e!==Lt&&e!==je&&e!==Or&&e!==_r&&e!==Lr&&e!==Dr&&e!==Pr&&e!==rn&&e!==Et&&e!==It&&e!==Ct&&e!==Mt&&e!==Ot&&e!==_t&&e!==Tt&&e!==St&&e!==kt&&e!==Dt&&e!==Pt}function qt(e){return!He(e)&&e!==je}function Se(e,n){var r=e.charCodeAt(n),i;return r>=55296&&r<=56319&&n+1<e.length&&(i=e.charCodeAt(n+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function Mr(e){var n=/^\n* /;return n.test(e)}var $r=1,on=2,jr=3,Hr=4,xe=5;function Wt(e,n,r,i,t,a,o,s){var u,c=0,m=null,p=!1,v=!1,y=i!==-1,b=-1,x=Vt(Se(e,0))&&qt(Se(e,e.length-1));if(n||o)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Se(e,u),!Ie(c))return xe;x=x&&Wn(c,m,s),m=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=Se(e,u),c===Ee)p=!0,y&&(v=v||u-b-1>i&&e[b+1]!==" ",b=u);else if(!Ie(c))return xe;x=x&&Wn(c,m,s),m=c}v=v||y&&u-b-1>i&&e[b+1]!==" "}return!p&&!v?x&&!o&&!t(e)?$r:a===Te?xe:on:r>9&&Mr(e)?xe:o?a===Te?xe:on:v?Hr:jr}function Gt(e,n,r,i,t){e.dump=function(){if(n.length===0)return e.quotingType===Te?'""':"''";if(!e.noCompatMode&&($t.indexOf(n)!==-1||jt.test(n)))return e.quotingType===Te?'"'+n+'"':"'"+n+"'";var a=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),s=i||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return Yt(e,c)}switch(Wt(n,s,e.indent,o,u,e.quotingType,e.forceQuotes&&!i,t)){case $r:return n;case on:return"'"+n.replace(/'/g,"''")+"'";case jr:return"|"+Gn(n,e.indent)+Jn(Vn(n,a));case Hr:return">"+Gn(n,e.indent)+Jn(Vn(Jt(n,o),a));case xe:return'"'+zt(n)+'"';default:throw new Q("impossible error: invalid scalar style")}}()}function Gn(e,n){var r=Mr(e)?String(n):"",i=e[e.length-1]===`
`,t=i&&(e[e.length-2]===`
`||e===`
`),a=t?"+":i?"":"-";return r+a+`
`}function Jn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Jt(e,n){for(var r=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,r.lastIndex=c,zn(e.slice(0,c),n)}(),t=e[0]===`
`||e[0]===" ",a,o;o=r.exec(e);){var s=o[1],u=o[2];a=u[0]===" ",i+=s+(!t&&!a&&u!==""?`
`:"")+zn(u,n),t=a}return i}function zn(e,n){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,t=0,a,o=0,s=0,u="";i=r.exec(e);)s=i.index,s-t>n&&(a=o>t?o:s,u+=`
`+e.slice(t,a),t=a+1),o=s;return u+=`
`,e.length-t>n&&o>t?u+=e.slice(t,o)+`
`+e.slice(o+1):u+=e.slice(t),u.slice(1)}function zt(e){for(var n="",r=0,i,t=0;t<e.length;r>=65536?t+=2:t++)r=Se(e,t),i=z[r],!i&&Ie(r)?(n+=e[t],r>=65536&&(n+=e[t+1])):n+=i||Bt(r);return n}function Xt(e,n,r){var i="",t=e.tag,a,o,s;for(a=0,o=r.length;a<o;a+=1)s=r[a],e.replacer&&(s=e.replacer.call(r,String(a),s)),(se(e,n,s,!1,!1)||typeof s>"u"&&se(e,n,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=t,e.dump="["+i+"]"}function Xn(e,n,r,i){var t="",a=e.tag,o,s,u;for(o=0,s=r.length;o<s;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(se(e,n+1,u,!0,!0,!1,!0)||typeof u>"u"&&se(e,n+1,null,!0,!0,!1,!0))&&((!i||t!=="")&&(t+=tn(e,n)),e.dump&&Ee===e.dump.charCodeAt(0)?t+="-":t+="- ",t+=e.dump);e.tag=a,e.dump=t||"[]"}function Qt(e,n,r){var i="",t=e.tag,a=Object.keys(r),o,s,u,c,m;for(o=0,s=a.length;o<s;o+=1)m="",i!==""&&(m+=", "),e.condenseFlow&&(m+='"'),u=a[o],c=r[u],e.replacer&&(c=e.replacer.call(r,u,c)),se(e,n,u,!1,!1)&&(e.dump.length>1024&&(m+="? "),m+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),se(e,n,c,!1,!1)&&(m+=e.dump,i+=m));e.tag=t,e.dump="{"+i+"}"}function Zt(e,n,r,i){var t="",a=e.tag,o=Object.keys(r),s,u,c,m,p,v;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Q("sortKeys must be a boolean or a function");for(s=0,u=o.length;s<u;s+=1)v="",(!i||t!=="")&&(v+=tn(e,n)),c=o[s],m=r[c],e.replacer&&(m=e.replacer.call(r,c,m)),se(e,n+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&Ee===e.dump.charCodeAt(0)?v+="?":v+="? "),v+=e.dump,p&&(v+=tn(e,n)),se(e,n+1,m,!0,p)&&(e.dump&&Ee===e.dump.charCodeAt(0)?v+=":":v+=": ",v+=e.dump,t+=v));e.tag=a,e.dump=t||"{}"}function Qn(e,n,r){var i,t,a,o,s,u;for(t=r?e.explicitTypes:e.implicitTypes,a=0,o=t.length;a<o;a+=1)if(s=t[a],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof n=="object"&&n instanceof s.instanceOf)&&(!s.predicate||s.predicate(n))){if(r?s.multi&&s.representName?e.tag=s.representName(n):e.tag=s.tag:e.tag="?",s.represent){if(u=e.styleMap[s.tag]||s.defaultStyle,Ir.call(s.represent)==="[object Function]")i=s.represent(n,u);else if(Fr.call(s.represent,u))i=s.represent[u](n,u);else throw new Q("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');e.dump=i}return!0}return!1}function se(e,n,r,i,t,a,o){e.tag=null,e.dump=r,Qn(e,r,!1)||Qn(e,r,!0);var s=Ir.call(e.dump),u=i,c;i&&(i=e.flowLevel<0||e.flowLevel>n);var m=s==="[object Object]"||s==="[object Array]",p,v;if(m&&(p=e.duplicates.indexOf(r),v=p!==-1),(e.tag!==null&&e.tag!=="?"||v||e.indent!==2&&n>0)&&(t=!1),v&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(m&&v&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),s==="[object Object]")i&&Object.keys(e.dump).length!==0?(Zt(e,n,e.dump,t),v&&(e.dump="&ref_"+p+e.dump)):(Qt(e,n,e.dump),v&&(e.dump="&ref_"+p+" "+e.dump));else if(s==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&n>0?Xn(e,n-1,e.dump,t):Xn(e,n,e.dump,t),v&&(e.dump="&ref_"+p+e.dump)):(Xt(e,n,e.dump),v&&(e.dump="&ref_"+p+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&Gt(e,e.dump,n,a,u);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Q("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Rt(e,n){var r=[],i=[],t,a;for(an(e,r,i),t=0,a=i.length;t<a;t+=1)n.duplicates.push(r[i[t]]);n.usedDuplicates=new Array(a)}function an(e,n,r){var i,t,a;if(e!==null&&typeof e=="object")if(t=n.indexOf(e),t!==-1)r.indexOf(t)===-1&&r.push(t);else if(n.push(e),Array.isArray(e))for(t=0,a=e.length;t<a;t+=1)an(e[t],n,r);else for(i=Object.keys(e),t=0,a=i.length;t<a;t+=1)an(e[i[t]],n,r)}function eo(e,n){n=n||{};var r=new Ut(n);r.noRefs||Rt(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),se(r,0,i,!0,!0)?r.dump+`
`:""}var no=eo,ro={dump:no};function fn(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var io=J,to=er,oo=tr,ao=ur,lo=cr,so=sn,uo=Tr.load,co=Tr.loadAll,po=ro.dump,fo=Q,mo={binary:hr,float:sr,map:ir,null:or,pairs:vr,set:yr,timestamp:dr,bool:ar,int:lr,merge:mr,omap:gr,seq:rr,str:nr},ho=fn("safeLoad","load"),go=fn("safeLoadAll","loadAll"),vo=fn("safeDump","dump"),Fe={Type:io,Schema:to,FAILSAFE_SCHEMA:oo,JSON_SCHEMA:ao,CORE_SCHEMA:lo,DEFAULT_SCHEMA:so,load:uo,loadAll:co,dump:po,YAMLException:fo,types:mo,safeLoad:ho,safeLoadAll:go,safeDump:vo};function dn({onImport:e,onClose:n}){let[r,i]=S("url"),[t,a]=S(""),[o,s]=S(!1),[u,c]=S(null),[m,p]=S(null),v=async()=>{if(!t.trim()){c("Bitte geben Sie eine URL ein");return}s(!0),c(null);try{let d=await fetch(t);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);let A=d.headers.get("content-type"),f=await d.text(),N;if(A?.includes("application/json"))N=JSON.parse(f);else if(A?.includes("yaml")||A?.includes("yml")||t.endsWith(".yaml")||t.endsWith(".yml"))N=Fe.load(f);else try{N=JSON.parse(f)}catch{try{N=Fe.load(f)}catch{throw new Error("Konnte weder als JSON noch als YAML geparst werden")}}b(N,t)}catch(d){c(`Import fehlgeschlagen: ${d.message}`)}finally{s(!1)}},y=d=>{let A=d.target.files[0];if(!A)return;let f=new FileReader;f.onload=N=>{try{let g=N.target.result,E;if(A.name.endsWith(".json"))E=JSON.parse(g);else if(A.name.endsWith(".yaml")||A.name.endsWith(".yml"))E=Fe.load(g);else try{E=JSON.parse(g)}catch{E=Fe.load(g)}b(E)}catch(g){c(`Datei-Parse fehlgeschlagen: ${g.message}`)}},f.readAsText(A)},b=(d,A=null)=>{try{let f={};if(A)try{let g=new URL(A);f.sourceOrigin=g.origin}catch{console.warn("Could not parse source URL:",A)}let N=Ln(d,f);if(N.length===0){c("Keine importierbaren APIs gefunden");return}p(N),c(null)}catch(f){c(`Konvertierung fehlgeschlagen: ${f.message}`)}},x=()=>{m&&m.length>0&&e(m)};return l.createElement("div",{className:"import-panel"},l.createElement("div",{className:"import-panel-header"},l.createElement("span",{className:"import-panel-title"},"OpenAPI 3.0 Import"),l.createElement("div",{className:"import-panel-modes"},l.createElement("button",{className:`import-mode-btn ${r==="url"?"active":""}`,onClick:()=>i("url")},"URL"),l.createElement("button",{className:`import-mode-btn ${r==="file"?"active":""}`,onClick:()=>i("file")},"Datei")),l.createElement("button",{className:"import-panel-close",onClick:n},"\u2715")),l.createElement("div",{className:"import-panel-body"},r==="url"&&l.createElement("div",{className:"import-url-row"},l.createElement("input",{type:"url",value:t,onChange:d=>a(d.target.value),placeholder:"https://api.example.com/openapi.json",disabled:o,className:"import-url-input",onKeyDown:d=>d.key==="Enter"&&v()}),l.createElement("button",{className:"btn-primary",onClick:v,disabled:o||!t.trim()},o?"L\xE4dt...":"Importieren")),r==="file"&&l.createElement("div",{className:"import-file-row"},l.createElement("label",{className:"import-file-btn"},l.createElement("input",{type:"file",accept:".json,.yaml,.yml",onChange:y,style:{display:"none"}}),"Datei w\xE4hlen (.json, .yaml)")),u&&l.createElement("div",{className:"import-error"},u),m&&m.length>0&&l.createElement("div",{className:"import-preview"},l.createElement("div",{className:"import-preview-header"},l.createElement("span",null,m.length," APIs gefunden"),l.createElement("button",{className:"btn-primary",onClick:x},"Alle importieren")),l.createElement("div",{className:"import-preview-list"},m.map((d,A)=>l.createElement("div",{key:A,className:"import-preview-item"},l.createElement("span",{className:`api-method-badge method-${d.method.toLowerCase()}`},d.method),l.createElement("span",{className:"import-preview-name"},d.name),l.createElement("span",{className:"import-preview-fields"},d.fields?.length||0," Felder")))))))}function mn({environments:e,activeEnvName:n,onChangeActive:r,onUpdateEnvironments:i}){let[t,a]=S(!1),[o,s]=S(null),[u,c]=S(""),[m,p]=S(""),[v,y]=S(""),b=G(()=>{a(!1),s(null)},[]),{isOpen:x,close:d,toggle:A,containerRef:f}=de({onClose:b}),N=e.find(w=>w.name===n),g=N?Object.keys(N.variables).length:0,E=w=>{r(w===n?"":w),d()},T=w=>{s(w),a(!0),c(""),p("")},Y=()=>{a(!1),s(null)},P=()=>{let w=v.trim();!w||e.some(F=>F.name===w)||(i([...e,{name:w,variables:{}}]),y(""))},O=w=>{let F=e[w],$=e.filter((ee,h)=>h!==w);i($),F.name===n&&r(""),a(!1),s(null)},M=()=>{let w=u.trim();if(!w||o===null)return;let F=[...e];F[o]={...F[o],variables:{...F[o].variables,[w]:m}},i(F),c(""),p("")},K=(w,F)=>{if(o===null)return;let $=[...e];$[o]={...$[o],variables:{...$[o].variables,[w]:F}},i($)},X=w=>{if(o===null)return;let F=[...e],$={...F[o].variables};delete $[w],F[o]={...F[o],variables:$},i(F)};return l.createElement("div",{className:"env-manager",ref:f,onKeyDown:w=>{w.key==="Escape"&&d()}},l.createElement("button",{className:`env-trigger ${n?"env-active":""}`,onClick:()=>{A(),b()},title:n?`Environment: ${n}`:"Kein Environment ausgew\xE4hlt"},l.createElement("span",{className:"env-icon"},"\u2699"),l.createElement("span",{className:"env-label"},n||"Env"),n&&l.createElement("span",{className:"env-var-count"},g),l.createElement("span",{className:"dropdown-arrow"},x?"\u25BE":"\u25B8")),x&&!t&&l.createElement("div",{className:"env-dropdown dropdown-panel"},l.createElement("div",{className:"env-dropdown-header"},l.createElement("strong",null,"Environments")),l.createElement("div",{className:"env-list"},e.length===0&&l.createElement("div",{className:"env-empty"},"Keine Environments definiert."),e.map((w,F)=>l.createElement("div",{key:w.name,className:`env-item ${w.name===n?"env-item-active":""}`},l.createElement("button",{className:"env-item-select",onClick:()=>E(w.name)},l.createElement("span",{className:"env-item-radio"},w.name===n?"\u25CF":"\u25CB"),l.createElement("span",{className:"env-item-name"},w.name),l.createElement("span",{className:"env-item-vars"},Object.keys(w.variables).length," Var.")),l.createElement("button",{className:"env-item-edit",onClick:()=>T(F),title:"Bearbeiten"},"\u270E")))),l.createElement("div",{className:"env-add-row"},l.createElement("input",{type:"text",className:"env-add-input",placeholder:"Neues Environment...",value:v,onChange:w=>y(w.target.value),onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),P())}}),l.createElement("button",{className:"btn-sm btn-primary",onClick:P,disabled:!v.trim()||e.some(w=>w.name===v.trim())},"+")),N&&Object.keys(N.variables).length>0&&l.createElement("div",{className:"env-preview"},l.createElement("div",{className:"env-preview-title"},"Aktive Variablen:"),Object.entries(N.variables).map(([w,F])=>l.createElement("div",{key:w,className:"env-preview-item"},l.createElement("span",{className:"env-preview-key"},`{{${w}}}`),l.createElement("span",{className:"env-preview-value"},F))))),x&&t&&o!==null&&e[o]&&l.createElement("div",{className:"env-dropdown dropdown-panel env-editor"},l.createElement("div",{className:"env-editor-header"},l.createElement("button",{className:"env-back-btn",onClick:Y},"\u2190 Zur\xFCck"),l.createElement("strong",null,e[o].name),l.createElement("button",{className:"btn-sm btn-danger",onClick:()=>O(o),title:"Environment l\xF6schen"},"\u{1F5D1}")),l.createElement("div",{className:"env-vars-list"},Object.entries(e[o].variables).length===0&&l.createElement("div",{className:"env-empty"},"Keine Variablen definiert."),Object.entries(e[o].variables).map(([w,F])=>l.createElement("div",{key:w,className:"env-var-row"},l.createElement("span",{className:"env-var-key"},w),l.createElement("input",{type:"text",className:"env-var-value-input",value:F,onChange:$=>K(w,$.target.value)}),l.createElement("button",{className:"env-var-delete",onClick:()=>X(w),title:"Variable l\xF6schen"},"\xD7")))),l.createElement("div",{className:"env-var-add"},l.createElement("input",{type:"text",className:"env-var-add-key",placeholder:"Key",value:u,onChange:w=>c(w.target.value),onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),M())}}),l.createElement("input",{type:"text",className:"env-var-add-value",placeholder:"Value",value:m,onChange:w=>p(w.target.value),onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),M())}}),l.createElement("button",{className:"btn-sm btn-primary",onClick:M,disabled:!u.trim()},"+"))))}function yo(){let[e,n]=S([]),[r,i]=S(null),[t,a]=S(null),[o,s]=S(null),[u,c]=S("request"),[m,p]=S(!0),[v,y]=S(null),[b,x]=S(!1),[d,A]=S({}),{showAlert:f,DialogRenderer:N}=me(),[g,E]=S(()=>En()),[T,Y]=S(()=>In());W(()=>{P()},[]);let P=async()=>{try{p(!0);let[h,k]=await Promise.all([fetch("/config/apis.json"),fetch("/config/domains.json").catch(()=>null)]);if(!h.ok)throw new Error(`Fehler beim Laden der APIs: ${h.statusText}`);let I=await h.json();if(n(I.apis||[]),k&&k.ok)try{let _=await k.json(),j={};Array.isArray(_)&&_.forEach(V=>{j[V.code]=V}),A(j)}catch(_){console.warn("Domains konnten nicht geladen werden:",_)}I.apis&&I.apis.length>0&&i(I.apis[0]),p(!1)}catch(h){y(h.message),p(!1),console.error("Fehler beim Laden der APIs:",h)}},O=h=>{i(h),a(null),s(null),c("request")},M=h=>{a(h)},K=h=>{let k=e.find(I=>I.id===h.apiId);k&&(i(k),s(h.payload),c("request"))},X=async()=>{try{let h=await fetch("/api/save-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apis:e})});if(!h.ok)throw new Error("Speichern fehlgeschlagen");(await h.json()).success&&f("APIs erfolgreich gespeichert!","success")}catch(h){f("Fehler beim Speichern: "+h.message,"error",0)}},w=h=>{E(h),Tn(h)},F=h=>{Y(h),Fn(h)},$=g.find(h=>h.name===T)?.variables||null,ee=h=>{let k=[...e,...h];n(k),h.length>0&&(i(h[0]),c("request")),x(!1)};return m?l.createElement("div",{className:"app-container"},l.createElement("div",{className:"loading"},l.createElement("div",{className:"spinner"}),l.createElement("p",null,"Lade API-Konfiguration..."))):v?l.createElement("div",{className:"app-container"},l.createElement(oe,{icon:"\u274C",message:"Fehler beim Laden"},l.createElement("p",{style:{marginTop:"10px"}},v),l.createElement("button",{onClick:P,className:"btn-primary",style:{marginTop:"15px"}},"Erneut versuchen"))):e.length===0?l.createElement("div",{className:"app-container"},l.createElement(oe,{icon:"\u2699\uFE0F",message:"Keine APIs konfiguriert"},l.createElement("p",{style:{marginTop:"10px"}},"Bitte f\xFCgen Sie API-Definitionen in ",l.createElement("code",null,"config/apis.json")," hinzu."))):l.createElement("div",{className:"app-container"},l.createElement("header",{className:"app-header"},l.createElement("div",{className:"header-content"},l.createElement("div",null,l.createElement("h1",null,"\u{1F680} API Test Framework"),l.createElement("p",{className:"subtitle"},"Flexibles Testing f\xFCr REST APIs")),l.createElement("div",{className:"header-actions"},l.createElement("button",{onClick:X,className:"btn-secondary btn-sm",title:"APIs in config/apis.json speichern"},"\u{1F4BE} APIs speichern"),l.createElement("button",{onClick:()=>x(!b),className:`btn-secondary btn-sm ${b?"active":""}`,title:"Import API from OpenAPI 3.0 Specification"},"\u{1F4E5} Import OpenAPI"),l.createElement(mn,{environments:g,activeEnvName:T,onChangeActive:F,onUpdateEnvironments:w})))),b&&l.createElement(dn,{onImport:ee,onClose:()=>x(!1)}),l.createElement(Ue,{apis:e,selectedApiId:r?.id,onSelect:O}),l.createElement("div",{className:"main-content"},l.createElement("div",{className:"sidebar"},l.createElement(Qe,{activeTab:u,onChange:c,tabs:[{id:"request",label:"\u{1F4DD} Request"},{id:"auth",label:"\u{1F510} Auth"},{id:"history",label:"\u{1F4DC} Historie"}]}),l.createElement("div",{className:"tab-content"},u==="request"&&l.createElement(qe,{api:r,onResponse:M,initialValues:o,domains:d,envVariables:$}),u==="auth"&&l.createElement(Je,{apiId:r?.id}),u==="history"&&l.createElement(Xe,{onReplay:K}))),l.createElement("div",{className:"response-panel"},l.createElement(We,{response:t}))),l.createElement("footer",{className:"app-footer"},l.createElement("p",null,"API Test Framework v1.0 | React + esbuild")),l.createElement(N,null))}var xo=gn.createRoot(document.getElementById("root"));xo.render(l.createElement(yo,null));})();
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT *)
*/
